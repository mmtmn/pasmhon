print("hello world")

x = 3 + 7
print(x)

if x < 15:
    print("small")

def f(n):
    return n * 2

print(f(x))

x = 0
while x < 5:
    if x == 3:
        x = x + 1
        continue
    print(x)
    x = x + 1

for i in range(3):
    print(i)

nums = [3, 1, 2]
nums.append(5)
nums.sort()
print(nums[0])
print(nums)

m = {"a": 1, "b": 2}
print(m["a"])
print(len(nums))
print(m.keys())

class Person:
    def __init__(self, name: str, age: int):
        self.name = name
        self.age  = age

    def birthday(self):
        self.age = self.age + 1

    def greet(self):
        print("hi, I am " + self.name)

p = Person("alice", 30)
p.greet()
p.birthday()
print(p.age)

class Animal:
    def speak(self):
        print("???")

class Dog(Animal):
    def speak(self):
        print("woof")

d = Dog()
d.speak()

try:
    raise "bad"
    print("should not run")
except:
    print("caught error")

a = [10, 20, 30, 40, 50]
print(a[1:4])
print(a[:3])
print(a[2:])
print(a[::2])

def make_counter():
    x = 0
    def inc():
        nonlocal x
        x = x + 1
        return x
    return inc

counter = make_counter()
print(counter())
print(counter())
print(counter())

import foo
foo.hi()

def add(a: int, b: int):
    return a + b

print(add(3, 4))

i = 0
while i < 20:
    add(i, i)
    i = i + 1

print(add(10, 20))

def greet(name, msg="hello"):
    return msg + " " + name

print(greet("bob"))
print(greet("bob", "hi"))

def area(w, h):
    return w * h

print(area(h=3, w=5))

def collect(a, *rest):
    return [a] + rest

print(collect(1))
print(collect(1,2,3,4))

square = lambda x: x * x
print(square(5))

adder = lambda a,b: a+b
print(adder(10, 20))

lc = [n*n for n in [1,2,3,4] if n % 2 == 0]
print(lc)

dc = { n: n*n for n in [1,2,3,4] if n > 2 }
print(dc)

def mix(a,b,c=100,d=200):
    return a+b+c+d

print(mix(1,2))
print(mix(1,2,3))
print(mix(1,2,3,4))
print(mix(1,b=2,d=9))

def gen_test(x):
    yield x
    yield x + 1
    yield x * 2

def gen_empty():
    return 7

print(gen_empty())

def gen_loop(n):
    i = 0
    while i < n:
        yield i * 10
        i = i + 1

print(gen_loop(4))

vals = []
for i in range(4):
    f = lambda x=i: x * 10
    vals.append(f())

print(vals)

xx = [ (n+1)*2 for n in [5,6,7] ]
print(xx)

yy = { k: k+10 for k in [10,20,30] }
print(yy)

# -----------------------
# NEW FEATURES TEST BELOW
# -----------------------

# generator expression
g = (n*n for n in [1,2,3,4] if n % 2 == 1)
# materialize
print([x for x in g])

# with statement
class Dummy:
    def __enter__(self):
        print("enter")
        return 123
    def __exit__(self, a, b, c):
        print("exit")

with Dummy() as v:
    print(v)

# enumerate and zip
print(list(enumerate(["a","b","c"], 5)))
print(list(zip([1,2,3],[10,20,30])))

# unicode
print("unicode: \u2665\ u2665".replace(" ", ""))

# async/await syntax (no real async, just syntax accepted)
async def foo_async(x):
    return await x

print(foo_async(10))

# real slicing semantics more tests
s = [0,1,2,3,4,5,6,7,8,9]
print(s[-5:])
print(s[:-5])
print(s[1:8:2])
print(s[::-1])
